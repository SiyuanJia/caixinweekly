# ğŸ“° è´¢æ–°Weekly - ç°ä»£åŒ–æ–°é—»é˜…è¯»å¹³å°

<p align="center">
  <img src="./caixinlogo.jpg" alt="è´¢æ–°Logo" width="200"/>
</p>

ä¸€ä¸ªç°ä»£åŒ–çš„**è´¢æ–°å‘¨åˆŠ**PDFé˜…è¯»å¹³å°ï¼Œæä¾›ä¼˜é›…çš„é˜…è¯»ä½“éªŒã€AIæ™ºèƒ½åˆ†æå’Œç¦»çº¿å·¥ä½œæµæ”¯æŒã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ“š **PDFæ™ºèƒ½è§£æ** - è‡ªåŠ¨æå–å‘¨åˆŠç›®å½•ä¹¦ç­¾ç»“æ„
- ğŸ¨ **ç²¾ç¾å“åº”å¼è®¾è®¡** - è´¢æ–°å“ç‰Œé…è‰²ã€PC/ç§»åŠ¨ç«¯é€‚é…
- ğŸ¤– **AIæ™ºèƒ½åˆ†æ** - é›†æˆ Gemini APIï¼Œä¸ºæ¯ç¯‡æ–‡ç« ç”Ÿæˆæ‘˜è¦å’Œæ ¸å¿ƒæ´å¯Ÿ
- ğŸ“– **é«˜ä¿çœŸPDFé˜…è¯»** - PDF.js æ¸²æŸ“ï¼Œä¿ç•™åŸå§‹æ’ç‰ˆã€æ”¯æŒç¼©æ”¾å’Œå¯¼èˆª
- ğŸ’¾ **æœ¬åœ°æ•°æ®å­˜å‚¨** - IndexedDBï¼Œæ•°æ®å®‰å…¨ç§å¯†ï¼Œç¦»çº¿å¯ç”¨
- ğŸ¯ **ç²¾å‡†æ–‡ç« å®šä½** - å¿«é€Ÿè·³è½¬åˆ°ä»»æ„æ–‡ç« ä½ç½®
- âš¡ **é«˜æ€§èƒ½åŠ è½½** - æ‡’åŠ è½½PDFé¡µé¢ï¼Œé¦–å±å“åº”å¿«
- ğŸ“¤ **å¯¼å‡ºåŠŸèƒ½** - æ”¯æŒå¯¼å‡º Outline ç»“æ„æ–‡ä»¶

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Node.js 16+ 
- npm æˆ– yarn

### 1ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
npm install
```

### 2ï¸âƒ£ å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® `http://localhost:5173`ï¼ˆæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ï¼‰

### 3ï¸âƒ£ æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

---

## ğŸ“– å·¥ä½œæµç¨‹

### å‘å¸ƒæ–°æœŸæ¬¡å‘¨åˆŠï¼ˆå®Œæ•´æµç¨‹ï¼‰

#### ç¬¬1æ­¥ï¼šå‡†å¤‡æ–‡ä»¶

å°†åˆ†ç‰‡ Markdown æ–‡ä»¶å’Œ outline.json æ”¾å…¥ `input/` ç›®å½•ï¼š

```
input/
â”œâ”€â”€ 2025-41-part1.md
â”œâ”€â”€ 2025-41-part2.md
â”œâ”€â”€ 2025-41-part3.md
â”œâ”€â”€ 2025-41-outline.json
â””â”€â”€ è´¢æ–°å‘¨åˆŠ2025ç¬¬41æœŸ.pdfï¼ˆå¯é€‰ï¼Œç”¨äºäº‘å‡½æ•°è°ƒç”¨ï¼‰
```

**æ–‡ä»¶æ ¼å¼è¯´æ˜ï¼š**
- **Markdown æ–‡ä»¶**ï¼šPaddleOCR ç­‰å·¥å…·å¯¼å‡ºçš„æ–‡æœ¬æå–ï¼ŒåŒ…å«å®Œæ•´æ–‡ç« å†…å®¹
- **outline.json**ï¼šPDF ç›®å½•ç»“æ„ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "issueTitle": "è´¢æ–°å‘¨åˆŠ2025ç¬¬41æœŸ",
  "outline": [
    { "title": "æ–‡ç« æ ‡é¢˜1", "pageNumber": 2 },
    { "title": "æ–‡ç« æ ‡é¢˜2", "pageNumber": 15 }
  ]
}
```

#### ç¬¬2æ­¥ï¼šè¿è¡Œæ„å»ºè„šæœ¬

```bash
python3 tools/build_issue_from_md.py \
  --issue-id 2025-41 \
  --issue-title "è´¢æ–°å‘¨åˆŠ2025ç¬¬41æœŸ" \
  --pdf public/data/pdfs/2025-41.pdf \
  --md-files input/2025-41-part1.md input/2025-41-part2.md input/2025-41-part3.md \
  --outline input/2025-41-outline.json \
  --output-dir public \
  --oss-base-url / \
  --gemini-endpoint "https://caixinweekly-pgfdddwbdi.cn-hongkong.fcapp.run" \
  --prompt-file ./prompt.txt
```

**å‚æ•°è¯´æ˜ï¼š**
- `--issue-id`: æœŸåˆŠç¼–å·ï¼ˆå¦‚ 2025-41ï¼‰
- `--pdf`: PDF æ–‡ä»¶è·¯å¾„ï¼ˆç”¨äºç”Ÿæˆ URLï¼Œæ–‡ä»¶éœ€è¦æ‰‹åŠ¨æ”¾å…¥ `public/data/pdfs/`ï¼‰
- `--md-files`: Markdown è¾“å…¥æ–‡ä»¶åˆ—è¡¨
- `--outline`: Outline JSON æ–‡ä»¶
- `--output-dir`: è¾“å‡ºç›®å½•ï¼ˆé€šå¸¸ä¸º `public`ï¼‰
- `--oss-base-url`: èµ„æºåŸºç¡€ URLï¼ˆæœ¬åœ°æµ‹è¯•ç”¨ `/`ï¼‰
- `--gemini-endpoint`: äº‘å‡½æ•°ç«¯ç‚¹ï¼ˆå¯é€‰ï¼‰
- `--prompt-file`: AI æç¤ºè¯æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

**è¾“å‡ºæ–‡ä»¶ï¼š**
```
public/data/
â”œâ”€â”€ issues/
â”‚   â””â”€â”€ 2025-41.json          # æœŸåˆŠå®Œæ•´æ•°æ®ï¼ˆå«AIæ‘˜è¦å’Œæ´å¯Ÿï¼‰
â”œâ”€â”€ markdown/
â”‚   â””â”€â”€ 2025-41.md            # å®Œæ•´æ­£æ–‡ Markdown
â””â”€â”€ pdfs/
    â””â”€â”€ 2025-41.pdf           # PDF æ–‡ä»¶ï¼ˆéœ€æ‰‹åŠ¨å¤åˆ¶ï¼‰
```

#### ç¬¬3æ­¥ï¼šæ‰‹åŠ¨å¤åˆ¶ PDF

```bash
# å°† PDF å¤åˆ¶åˆ°ç›¸åº”ä½ç½®
cp input/è´¢æ–°å‘¨åˆŠ.pdf public/data/pdfs/2025-41.pdf
```

#### ç¬¬4æ­¥ï¼šæœ¬åœ°æµ‹è¯•

```bash
npm run dev
# è®¿é—® http://localhost:5173 æŸ¥çœ‹æ–°æœŸæ¬¡å‘¨åˆŠ
```

#### ç¬¬5æ­¥ï¼šæäº¤ç‰ˆæœ¬

```bash
git add public/data/
git commit -m "feat: æ·»åŠ è´¢æ–°å‘¨åˆŠ2025ç¬¬41æœŸ"
git push
```

---

## ğŸŒ å‰ç«¯ä½¿ç”¨æŒ‡å—

### é¦–é¡µï¼ˆæ–‡ç« åˆ—è¡¨ï¼‰

- æ˜¾ç¤ºå½“å‰æœŸæ¬¡çš„æ‰€æœ‰æ–‡ç« å¡ç‰‡
- **å¡ç‰‡å±•ç¤º**ï¼šå°é¢å›¾ã€æ ‡é¢˜ã€é¡µç ã€AI æ‘˜è¦é¢„è§ˆ
- **äº¤äº’æ–¹å¼**ï¼š
  - **PCç«¯**ï¼šé¼ æ ‡æ‚¬åœ AI æ‘˜è¦è¡Œï¼Œæ˜¾ç¤ºå®Œæ•´çš„æ‘˜è¦å’Œæ ¸å¿ƒæ´å¯Ÿå¼¹çª—
  - **ç§»åŠ¨ç«¯**ï¼šç‚¹å‡» AI æ‘˜è¦è¡Œå³ä¾§çš„ç®­å¤´ï¼Œåœ¨å¡ç‰‡ä¸‹æ–¹å±•ç¤ºå¼¹çª—

### æ–‡ç« è¯¦æƒ…é¡µ

- ç‚¹å‡»ä»»æ„æ–‡ç« å¡ç‰‡ï¼Œè·³è½¬åˆ°è¯¥æ–‡ç« çš„ PDF é˜…è¯»é¡µ
- **å·¥å…·æ **ï¼šå·¦ä¸Šè§’"è¿”å›ç›®å½•"æŒ‰é’®
- **äº¤äº’**ï¼š
  - æ»šåŠ¨æŸ¥çœ‹æ–‡ç« å†…å®¹
  - æ”¯æŒ PDF ç¼©æ”¾ï¼ˆæµè§ˆå™¨çº§åˆ«ï¼‰
  - é¦–å±å¿«é€ŸåŠ è½½ï¼Œå…¶ä»–é¡µé¢åå°æ‡’åŠ è½½

### é…ç½®é¢æ¿

ç‚¹å‡»å³ä¸Šè§’é½¿è½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰æ‰“å¼€é…ç½®é¢æ¿ï¼š

- **ä¸Šä¼ æ–°æœŸæ¬¡**ï¼šé€‰æ‹© PDF æ–‡ä»¶ï¼Œè‡ªåŠ¨è§£æç›®å½•ç»“æ„
- **å¯¼å‡º Outline**ï¼šå¯¼å‡ºåˆšä¸Šä¼ çš„ PDF çš„ç›®å½•ç»“æ„ä¸º JSON æ–‡ä»¶

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç”¨é€” |
|-----|------|------|
| **å‰ç«¯æ¡†æ¶** | React 18 + TypeScript | UI æ¡†æ¶ |
| **æ„å»ºå·¥å…·** | Vite | é«˜é€Ÿå¼€å‘æ„å»º |
| **æ ·å¼** | TailwindCSS | åŸå­åŒ– CSS æ¡†æ¶ |
| **åŠ¨ç”»** | Framer Motion | æµç•…åŠ¨ç”»æ•ˆæœ |
| **PDFå¤„ç†** | PDF.js | é«˜ä¿çœŸ PDF æ¸²æŸ“ |
| **æ•°æ®å­˜å‚¨** | Dexie.js (IndexedDB) | æœ¬åœ°ç¦»çº¿æ•°æ®åº“ |
| **çŠ¶æ€ç®¡ç†** | Zustand | è½»é‡çº§å…¨å±€çŠ¶æ€ |
| **å›¾æ ‡åº“** | Lucide React | ç°ä»£ SVG å›¾æ ‡ |

### ç›®å½•ç»“æ„

```
caixin-weekly-reader/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout.tsx           # æ•´ä½“å¸ƒå±€ï¼ˆå¤´éƒ¨+å†…å®¹ï¼‰
â”‚   â”‚   â”œâ”€â”€ ArticleCard.tsx      # æ–‡ç« å¡ç‰‡ï¼ˆæ”¯æŒ PC/ç§»åŠ¨ç«¯å¼¹çª—ï¼‰
â”‚   â”‚   â”œâ”€â”€ ConfigModal.tsx      # é…ç½®å¼¹çª—ï¼ˆPDF ä¸Šä¼ ã€å¯¼å‡ºï¼‰
â”‚   â”‚   â”œâ”€â”€ ReaderPage.tsx       # PDF é˜…è¯»é¡µé¢ï¼ˆæ‡’åŠ è½½ï¼‰
â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.tsx   # åŠ è½½æŒ‡ç¤ºå™¨
â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx    # é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â””â”€â”€ ShareButton.tsx      # åˆ†äº«æŒ‰é’®
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx         # é¦–é¡µï¼ˆæ–‡ç« åˆ—è¡¨ï¼‰
â”‚   â”‚   â””â”€â”€ ReaderPage.tsx       # é˜…è¯»é¡µï¼ˆPDF æŸ¥çœ‹ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ db.ts                # Dexie æ•°æ®åº“å®šä¹‰å’Œæ“ä½œ
â”‚   â”‚   â”œâ”€â”€ store.ts             # Zustand å…¨å±€çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ pdf-parser.ts        # PDF è§£æå’Œä¹¦ç­¾æå–
â”‚   â”‚   â”œâ”€â”€ gemini.ts            # AI åˆ†ææ¥å£ï¼ˆå·²å¼ƒç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ static-data.ts       # é™æ€æ•°æ®åŠ è½½
â”‚   â”‚   â”œâ”€â”€ utils.ts             # å·¥å…·å‡½æ•°ï¼ˆæ–‡æœ¬å¤„ç†ã€markdown è½¬ HTMLï¼‰
â”‚   â”‚   â””â”€â”€ oss-config.ts        # OSS é…ç½®ï¼ˆå·²å¼ƒç”¨ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                  # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx                 # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.css                # å…¨å±€æ ·å¼å’Œè‡ªå®šä¹‰æ»šåŠ¨æ¡
â”‚
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ build_issue_from_md.py   # ğŸ”‘ æ ¸å¿ƒæ„å»ºè„šæœ¬ï¼ˆä» MD æ–‡ä»¶ç”Ÿæˆ JSONï¼‰
â”‚   â””â”€â”€ ï¼ˆå…¶ä»–è¿‡æœŸè„šæœ¬å·²åˆ é™¤ï¼‰
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ issues/              # æœŸåˆŠæ•°æ® JSON æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ markdown/            # å®Œæ•´ Markdown æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ pdfs/                # PDF æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ README.md            # æ•°æ®æ–‡ä»¶ç»“æ„è¯´æ˜
â”‚   â”œâ”€â”€ pdf.worker.min.mjs       # PDF.js Worker æ–‡ä»¶
â”‚   â””â”€â”€ vite.svg
â”‚
â”œâ”€â”€ input/                       # è¾“å…¥æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ 2025-41-part1.md
â”‚   â”œâ”€â”€ 2025-41-part2.md
â”‚   â””â”€â”€ 2025-41-outline.json
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tailwind.config.js           # TailwindCSS é…ç½®ï¼ˆè´¢æ–°å“ç‰Œè‰²ï¼‰
â”œâ”€â”€ vite.config.ts               # Vite æ„å»ºé…ç½®
â”œâ”€â”€ postcss.config.js            # PostCSS é…ç½®
â”‚
â”œâ”€â”€ prompt.txt                   # AI æç¤ºè¯æ¨¡æ¿ï¼ˆè°ƒç”¨ Geminiï¼‰
â”œâ”€â”€ caixin_index.py              # ğŸ”‘ äº‘å‡½æ•°ä»£ç ï¼ˆéƒ¨ç½²åˆ°é˜¿é‡Œäº‘ Function Computeï¼‰
â””â”€â”€ README.md                    # æœ¬æ–‡æ¡£
```

---

## ğŸ¨ è®¾è®¡ç³»ç»Ÿ

### å“ç‰Œé…è‰²

éµå¾ªè´¢æ–°åª’ä½“çš„é«˜ç«¯å“ç‰Œé£æ ¼ï¼š

| è‰²å½© | HEX å€¼ | ç”¨é€” |
|------|--------|------|
| ä¸»è‰² | `#1a2744` | æ ‡é¢˜ã€å¯¼èˆªã€å¼ºè°ƒ |
| å¼ºè°ƒè‰² | `#f5a623` | æŒ‰é’®ã€é“¾æ¥ã€å›¾æ ‡ |
| èƒŒæ™¯è‰² | `#f8f9fa` | é¡µé¢èƒŒæ™¯ |
| æ–‡å­—è‰² | `#333333` | æ­£æ–‡å†…å®¹ |
| åˆ†å‰²çº¿ | `#e0e0e0` | è¾¹æ¡†ã€åˆ†å‰² |

### å“åº”å¼è®¾è®¡

- **PCç«¯ï¼ˆâ‰¥768pxï¼‰**ï¼š
  - 3åˆ—ç½‘æ ¼å¸ƒå±€ï¼ˆæ–‡ç« å¡ç‰‡ï¼‰
  - å¼¹çª—æ˜¾ç¤ºåœ¨å¡ç‰‡å³ä¾§
  - æ”¯æŒé¼ æ ‡æ‚¬åœäº¤äº’
  
- **å¹³æ¿ï¼ˆ768px-1024pxï¼‰**ï¼š
  - 2åˆ—ç½‘æ ¼å¸ƒå±€
  
- **æ‰‹æœºï¼ˆ<768pxï¼‰**ï¼š
  - å•åˆ—å¸ƒå±€
  - å¼¹çª—æ˜¾ç¤ºåœ¨å¡ç‰‡ä¸‹æ–¹
  - ç‚¹å‡»è§¦å‘å¼¹çª—
  - ä¼˜åŒ–çš„å†…è¾¹è·å’Œå­—ä½“å¤§å°

### UI äº®ç‚¹

1. **AI å¼¹çª—è®¾è®¡**ï¼š
   - è“ç´«æ¸å˜è¾¹æ¡† + å‘å…‰æ•ˆæœ
   - è‡ªå®šä¹‰ç»†æ»šåŠ¨æ¡ï¼ˆ3px å®½ï¼Œä¸è¾¹æ¡†åè°ƒï¼‰
   - æ”¯æŒ Markdown åŸºç¡€æ ¼å¼æ¸²æŸ“ï¼ˆåŠ ç²—ã€æ¢è¡Œã€åˆ—è¡¨ï¼‰

2. **æ–‡ç« å¡ç‰‡**ï¼š
   - å°é¢å›¾æ‚¬åœæ”¾å¤§æ•ˆæœ
   - å¹³æ»‘çš„ Y è½´åŠ¨ç”»
   - é‡‘è‰²æ ‡ç­¾åºå·è§’æ ‡

3. **é˜…è¯»ä½“éªŒ**ï¼š
   - PDF é¡µé¢å¹³æ»‘è¿‡æ¸¡
   - é¦–å±å¿«é€ŸåŠ è½½ + åå°æ‡’åŠ è½½
   - ç§»åŠ¨ç«¯é¡µé¢å®½åº¦ä¼˜åŒ–

---

## ğŸ”§ æŠ€æœ¯äº®ç‚¹

### 1. æ™ºèƒ½ PDF è§£æ

- è‡ªåŠ¨æå– PDF ä¹¦ç­¾ä½œä¸ºæ–‡ç« ç›®å½•
- æ”¯æŒå¤šçº§ä¹¦ç­¾ç»“æ„
- å¼‚å¸¸å¤„ç†å’Œå®¹é”™æœºåˆ¶

### 2. å“åº”å¼å¼¹çª—

**PCç«¯ï¼š**
- å›ºå®šå®šä½ (`fixed`)ï¼Œç›¸å¯¹äºè§†å£
- å®æ—¶ç›‘å¬ scroll/resize äº‹ä»¶æ›´æ–°ä½ç½®
- é¼ æ ‡ç§»å‡ºæ—¶è‡ªåŠ¨å…³é—­

**ç§»åŠ¨ç«¯ï¼š**
- ç»å¯¹å®šä½ (`absolute`)ï¼Œç›¸å¯¹äºæ–‡æ¡£
- ç‚¹å‡»æ‰“å¼€/å…³é—­
- è·Ÿéšé¡µé¢æ»šåŠ¨
- å³ä¸Šè§’å…³é—­æŒ‰é’®

### 3. PDF é¡µé¢æ‡’åŠ è½½

```typescript
// åˆå§‹åŠ è½½ï¼šç›®æ ‡é¡µé¢ Â± 10 é¡µ
// åç»­ï¼šå¼‚æ­¥åŠ è½½å‰©ä½™é¡µé¢ï¼ˆåå°è¿è¡Œï¼‰
renderRange(page - 10, page + 10)  // åŒæ­¥æ¸²æŸ“
loadRest()                          // å¼‚æ­¥åŠ è½½å…¶ä»–é¡µ
```

### 4. æ–‡æœ¬å¤„ç†å’Œ Markdown æ”¯æŒ

AI è¿”å›çš„æ‘˜è¦å’Œæ´å¯Ÿå¯èƒ½åŒ…å«ï¼š
- `**bold text**` â†’ `<strong>`
- `\n` â†’ `<br/>`
- `- item` â†’ `<ul><li>`
- `1. item` â†’ `<ol><li>`

é€šè¿‡ `aiTextToHtml()` å‡½æ•°è‡ªåŠ¨è½¬æ¢ã€‚

### 5. äº‘å‡½æ•°é›†æˆ

é€šè¿‡è‡ªå»ºäº‘å‡½æ•°ï¼ˆ`caixin_index.py`ï¼‰è°ƒç”¨ Gemini APIï¼š
- æ”¯æŒæ‰¹é‡æ–‡ç« è¯·æ±‚
- è‡ªåŠ¨è§£æ JSON æ ¼å¼è¾“å‡º
- CORS å¤´å¤„ç†
- 500ms è¶…æ—¶æœºåˆ¶

---

## ğŸ“Š æ•°æ®æµ

```
input/
â”œâ”€â”€ *.md (åˆ†ç‰‡ Markdown æ–‡ä»¶)
â””â”€â”€ *-outline.json

         â†“ build_issue_from_md.py

public/data/
â”œâ”€â”€ issues/*.json (å®Œæ•´æœŸåˆŠæ•°æ®)
â”œâ”€â”€ markdown/*.md
â””â”€â”€ pdfs/*.pdf

         â†“ å‰ç«¯åŠ è½½

HomePage
â”œâ”€â”€ åŠ è½½ public/data/issues/2025-41.json
â”œâ”€â”€ æ¸²æŸ“ ArticleCard åˆ—è¡¨
â””â”€â”€ æ”¯æŒç‚¹å‡»æ‰“å¼€ ReaderPage

ReaderPage
â”œâ”€â”€ æ ¹æ® issue & page å‚æ•°åŠ è½½ PDF
â”œâ”€â”€ ç›®æ ‡é¡µé¢å¿«é€ŸåŠ è½½
â”œâ”€â”€ å…¶ä»–é¡µé¢åå°æ‡’åŠ è½½
â””â”€â”€ æ”¯æŒç¼©æ”¾å’Œå¯¼èˆª
```

---

## ğŸ› ï¸ æ„å»ºè„šæœ¬ä½¿ç”¨

### build_issue_from_md.py

**åŠŸèƒ½ï¼š** ä»åˆ†ç‰‡ Markdown æ–‡ä»¶æ„å»ºå®Œæ•´çš„æœŸåˆŠ JSON

**ä½¿ç”¨åœºæ™¯ï¼š**
- å·²æœ‰ Markdown æ–‡æœ¬æå–å’Œ Outline ç»“æ„
- éœ€è¦è°ƒç”¨ AIï¼ˆGeminiï¼‰ç”Ÿæˆæ‘˜è¦å’Œæ´å¯Ÿ

**å·¥ä½œæµç¨‹ï¼š**
1. è¯»å– outline.json ä½œä¸ºæ–‡ç« æ¸…å•
2. è§£æ Markdown æ–‡ä»¶ï¼ŒæŒ‰ outline åˆ‡åˆ†å†…å®¹
3. åˆå¹¶æ‰€æœ‰å†…å®¹åˆ°ä¸€ä¸ªåˆ—è¡¨
4. è°ƒç”¨äº‘å‡½æ•°ç”Ÿæˆ AI æ‘˜è¦å’Œæ´å¯Ÿï¼ˆå¯é€‰ï¼‰
5. ç”Ÿæˆ JSONã€Markdown åˆ° `public/data/`

**å‚æ•°ï¼š**

| å‚æ•° | å¿…éœ€ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `--issue-id` | âœ… | æœŸåˆŠç¼–å· | `2025-41` |
| `--issue-title` | âœ… | æœŸåˆŠæ ‡é¢˜ | `è´¢æ–°å‘¨åˆŠ2025ç¬¬41æœŸ` |
| `--pdf` | âœ… | PDF è·¯å¾„ | `public/data/pdfs/2025-41.pdf` |
| `--md-files` | âœ… | Markdown æ–‡ä»¶åˆ—è¡¨ | `input/2025-41-part*.md` |
| `--outline` | âœ… | Outline JSON | `input/2025-41-outline.json` |
| `--output-dir` | âœ… | è¾“å‡ºç›®å½• | `public` |
| `--oss-base-url` | âœ… | èµ„æºåŸºç¡€ URL | `/` æˆ– CDN URL |
| `--gemini-endpoint` | âŒ | äº‘å‡½æ•°ç«¯ç‚¹ | è§äº‘å‡½æ•°éƒ¨åˆ† |
| `--gemini-api-key` | âŒ | API Key | - |
| `--prompt-file` | âŒ | æç¤ºè¯æ–‡ä»¶ | `./prompt.txt` |

**ç¤ºä¾‹å‘½ä»¤ï¼š**

```bash
# åŸºç¡€ç”¨æ³•ï¼ˆä»…ç”Ÿæˆ JSONï¼Œä¸è°ƒç”¨ AIï¼‰
python3 tools/build_issue_from_md.py \
  --issue-id 2025-41 \
  --issue-title "è´¢æ–°å‘¨åˆŠ2025ç¬¬41æœŸ" \
  --pdf public/data/pdfs/2025-41.pdf \
  --md-files input/2025-41-part1.md input/2025-41-part2.md \
  --outline input/2025-41-outline.json \
  --output-dir public \
  --oss-base-url /

# å®Œæ•´ç”¨æ³•ï¼ˆè°ƒç”¨äº‘å‡½æ•°ç”Ÿæˆ AI æ‘˜è¦ï¼‰
python3 tools/build_issue_from_md.py \
  --issue-id 2025-41 \
  --issue-title "è´¢æ–°å‘¨åˆŠ2025ç¬¬41æœŸ" \
  --pdf public/data/pdfs/2025-41.pdf \
  --md-files input/2025-41-part1.md input/2025-41-part2.md \
  --outline input/2025-41-outline.json \
  --output-dir public \
  --oss-base-url / \
  --gemini-endpoint "https://caixinweekly-pgfdddwbdi.cn-hongkong.fcapp.run" \
  --prompt-file ./prompt.txt
```

---

## â˜ï¸ äº‘å‡½æ•°éƒ¨åˆ†ï¼ˆå¯é€‰ï¼‰

### æ¦‚è¿°

é¡¹ç›®æ”¯æŒé€šè¿‡è‡ªå»ºäº‘å‡½æ•°ï¼ˆé˜¿é‡Œäº‘ Function Computeï¼‰è°ƒç”¨ Gemini APIï¼Œä¸ºæ–‡ç« ç”Ÿæˆ AI æ‘˜è¦å’Œæ´å¯Ÿã€‚

### éƒ¨ç½²äº‘å‡½æ•°

1. **ä¸Šä¼ ä»£ç **ï¼šå°† `caixin_index.py` ä¸Šä¼ åˆ°é˜¿é‡Œäº‘ Function Compute
2. **ç¯å¢ƒå˜é‡é…ç½®**ï¼š
   ```
   THIRTY_TWO_AI_API_KEY = <ä½ çš„ 302.ai API Key>
   ALLOWED_ORIGINS = http://localhost:5173
   ```
3. **æµ‹è¯•ç«¯ç‚¹**ï¼ˆcurlï¼‰ï¼š
   ```bash
   curl -X POST https://your-function-url \
     -H "Content-Type: application/json" \
     -H "Origin: http://localhost:5173" \
     -d '{
       "issueId": "2025-41",
       "articles": [
         {"id": "2025-41-0", "title": "æ–‡ç« æ ‡é¢˜", "content": "æ–‡ç« å†…å®¹..."}
       ],
       "prompt": "..."
     }'
   ```

### Prompt é…ç½®

ç¼–è¾‘ `prompt.txt`ï¼Œæ§åˆ¶ AI è¾“å‡ºæ ¼å¼ï¼š

```
- summary: æ–‡ç« æ‘˜è¦ï¼ˆâ‰¤200å­—ï¼‰
- insight: æ ¸å¿ƒæ´å¯Ÿï¼ˆâ‰¤500å­—ï¼Œå»ºè®®ç”¨åˆ—è¡¨ï¼‰
```

è¯¦è§ `prompt.txt` æ–‡ä»¶ã€‚

---

## ğŸ“¦ éƒ¨ç½²

### Vercel éƒ¨ç½²

1. å°†é¡¹ç›®æ¨é€åˆ° GitHub
2. è¿æ¥åˆ° Vercel
3. Vercel è‡ªåŠ¨è¯†åˆ« Vite é…ç½®å¹¶éƒ¨ç½²

### æœ¬åœ°éƒ¨ç½²

```bash
npm run build
# dist/ ç›®å½•åŒ…å«é™æ€æ–‡ä»¶ï¼Œå¯ç”¨ä»»ä½•æœåŠ¡å™¨ï¼ˆNginxã€Apacheï¼‰æ‰˜ç®¡
```

---

## ğŸ”’ éšç§å’Œå®‰å…¨

- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨ï¼ˆIndexedDBï¼‰
- æ— æœåŠ¡å™¨åç«¯ï¼Œæ— ç”¨æˆ·è·Ÿè¸ª
- ä»…åœ¨é€‰æ‹©è°ƒç”¨ AI åŠŸèƒ½æ—¶ï¼Œå‘é€æ•°æ®åˆ°äº‘å‡½æ•°
- API Key ä¸å­˜å‚¨åœ¨ä»£ç ä¸­ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®

---

## ğŸ“ è®¸å¯

MIT License

---

## ğŸ‘¨â€ğŸ’» å¼€å‘

### é¡¹ç›®å‘½ä»¤

```bash
# å¼€å‘æœåŠ¡å™¨
npm run dev

# ç±»å‹æ£€æŸ¥
npm run check

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

### è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ PRï¼

### å¸¸è§é—®é¢˜

**Q: PDF æ— æ³•æ˜¾ç¤ºï¼Ÿ**  
A: ç¡®ä¿ `public/data/pdfs/` ç›®å½•ä¸‹å­˜åœ¨å¯¹åº”çš„ PDF æ–‡ä»¶ï¼Œä¸”æ–‡ä»¶åä¸ JSON ä¸­çš„ `pdfUrl` åŒ¹é…ã€‚

**Q: AI æ‘˜è¦ä¸ºç©ºï¼Ÿ**  
A: å¦‚æœæœªé…ç½®äº‘å‡½æ•°æˆ–è°ƒç”¨å¤±è´¥ï¼Œæ‘˜è¦å°†ä¸ºç©ºã€‚æ­¤æ—¶æ–‡ç« ä»å¯é˜…è¯»ï¼Œä½†æ—  AI åˆ†æã€‚

**Q: å¦‚ä½•è‡ªå®šä¹‰å“ç‰Œè‰²ï¼Ÿ**  
A: ç¼–è¾‘ `tailwind.config.js` ä¸­çš„ `caixin-*` è‰²å½©å®šä¹‰ã€‚

---

**æœ€åæ›´æ–°ï¼š** 2025å¹´11æœˆ  
**ç‰ˆæœ¬ï¼š** 2.0  

---

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿè¯·æŸ¥çœ‹ï¼š
- ğŸ“– [é¡¹ç›®æ¶æ„è¯´æ˜](#ğŸ—ï¸-é¡¹ç›®æ¶æ„)
- ğŸ”§ [æ„å»ºè„šæœ¬æ–‡æ¡£](#ğŸ› ï¸-æ„å»ºè„šæœ¬ä½¿ç”¨)
- ğŸ“Š [æ•°æ®æµç¨‹](#ğŸ“Š-æ•°æ®æµ)
